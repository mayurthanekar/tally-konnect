# ===========================================
# Tally Konnect - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values

# --- Server ---
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# --- Database (PostgreSQL) ---
# Option 1: Connection URL (Render, Neon, Supabase)
DATABASE_URL=postgresql://user:password@host:5432/tally_konnect?sslmode=require

# Option 2: Individual params (local Docker setup)
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=tally_konnect
# DB_USER=postgres
# DB_PASSWORD=postgres
# DB_SSL=false

# --- Security ---
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=
JWT_SECRET=change-this-to-a-random-string

# --- CORS ---
CORS_ORIGIN=*

# --- Rate Limiting ---
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=200

# --- File Uploads ---
MAX_FILE_SIZE_MB=10
UPLOAD_TEMP_DIR=/tmp/tally-konnect-uploads

# --- Tally Defaults ---
TALLY_DEFAULT_HOST=http://localhost
TALLY_DEFAULT_PORT=9000
TALLY_TIMEOUT_MS=30000
TALLY_RETRIES=2

# --- Logging ---
LOG_LEVEL=debug
LOG_FORMAT=pretty

# --- OAuth Providers ---
# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Microsoft OAuth
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_TENANT_ID=common

# --- Resend (Primary Email Provider — recommended) ---
# Sign up at https://resend.com, create an API key, and verify your domain
RESEND_API_KEY=re_xxxxxxxxx
RESEND_FROM="Tally Konnect <otp@yourdomain.com>"

# --- SMTP (Fallback Email — optional if using Resend) ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM="Tally Konnect <your-email@gmail.com>"

# --- SMS (Mobile OTP) ---
SMS_PROVIDER=twilio
TWILIO_SID=
TWILIO_TOKEN=
TWILIO_FROM=

# --- WebSocket Relay (KonnectBridge) ---
# Must match the BRIDGE_API_KEY set in the KonnectBridge .env on the local machine
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
BRIDGE_API_KEY=change-me-to-a-long-random-string
